{
    "name": "Ansible-Tower-Prometheus",
    "description": null,
    "pages": [
      {
        "name": "Ansible Tower",
        "description": null,
        "widgets": [
          {
            "title": "",
            "layout": {
              "column": 1,
              "row": 1,
              "width": 3,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.markdown"
            },
            "rawConfiguration": {
              "text": "\n![logo](https://marvel-b1-cdn.bc0a.com/f00000000236551/dt-cdn.net/wp-content/uploads/2018/03/logo.png)\n"
            }
          },
          {
            "title": "Ansible Versions",
            "layout": {
              "column": 4,
              "row": 1,
              "width": 9,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.table"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT uniques(tower_version), uniques(ansible_version) SINCE 3 months ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Services Running on Host",
            "layout": {
              "column": 1,
              "row": 3,
              "width": 4,
              "height": 4
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.pie"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(*) FACET job"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "AWX Hosts",
            "layout": {
              "column": 5,
              "row": 3,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT sum(awx_hosts_total) AS '' SINCE 1 month ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Successful Jobs",
            "layout": {
              "column": 7,
              "row": 3,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(*) WHERE entity.guid = 'MzUxMDYxM3xJTkZSQXxOQXw4MjYzOTA3MzM5MjAwNjEyMDE3' OR (status = 'successful' AND prometheus_server = 'prometheus_remote' AND job = 'tower') SINCE 1 HOUR AGO"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              },
              "thresholds": [
                {
                  "value": 0
                }
              ]
            }
          },
          {
            "title": "Error Jobs",
            "layout": {
              "column": 9,
              "row": 3,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(*) WHERE (status = 'error' AND prometheus_server = 'prometheus_remote' AND job = 'tower') SINCE 1 hour AGO"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              },
              "thresholds": [
                {
                  "alertSeverity": "CRITICAL",
                  "value": 0
                }
              ]
            }
          },
          {
            "title": "Failed Jobs",
            "layout": {
              "column": 11,
              "row": 3,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(*) WHERE (status = 'failed' AND prometheus_server = 'prometheus_remote' AND job = 'tower') SINCE 1 hour ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              },
              "thresholds": [
                {
                  "alertSeverity": "WARNING",
                  "value": 0
                }
              ]
            }
          },
          {
            "title": "AWX Inventories",
            "layout": {
              "column": 5,
              "row": 5,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT sum(awx_inventories_total) AS '' SINCE 3 months ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "AWX Projects",
            "layout": {
              "column": 7,
              "row": 5,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT sum(awx_projects_total) AS '' SINCE 3 months ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "AWX Running Jobs",
            "layout": {
              "column": 9,
              "row": 5,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT sum(awx_running_jobs_total) AS '' SINCE 7 days ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "AWX Pending Jobs",
            "layout": {
              "column": 11,
              "row": 5,
              "width": 2,
              "height": 2
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT sum(awx_pending_jobs_total) AS '' SINCE 7 days ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Cumulative Job Status",
            "layout": {
              "column": 1,
              "row": 7,
              "width": 6,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.pie"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": true
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(status) FACET status SINCE 7 days ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "AWX Organizations",
            "layout": {
              "column": 7,
              "row": 7,
              "width": 2,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(awx_organizations_total) TIMESERIES MAX SINCE 7 days ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              },
              "yAxisLeft": {
                "zero": true
              }
            }
          },
          {
            "title": "AWX Teams Jobs",
            "layout": {
              "column": 9,
              "row": 7,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.area"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(awx_teams_total) TIMESERIES MAX SINCE 7 days ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Usage Metrics",
            "layout": {
              "column": 1,
              "row": 10,
              "width": 6,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.area"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(*) SINCE 7 days ago TIMESERIES MAX FACET usage.metric "
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Job Status",
            "layout": {
              "column": 7,
              "row": 10,
              "width": 6,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.area"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT count(*) SINCE 7 days ago Timeseries MAX FACET status "
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Available Logtypes",
            "layout": {
              "column": 1,
              "row": 13,
              "width": 8,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.table"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Log SELECT count(*) FACET logtype "
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Host Load - Last Week Comparision",
            "layout": {
              "column": 9,
              "row": 13,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Metric SELECT average(host.loadAverageOneMinute), percentile(host.loadAverageOneMinute) SINCE 7 days ago COMPARE WITH 1 week ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Ansible Tower Log",
            "layout": {
              "column": 1,
              "row": 16,
              "width": 12,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "logger.log-table-widget"
            },
            "rawConfiguration": {
              "nrqlQueries": [
                {
                  "accountId": 0,
                  "query": "FROM Log SELECT *"
                }
              ]
            }
          }
        ]
      },
      {
        "name": "Infrastructure",
        "description": null,
        "widgets": [
          {
            "title": "CPU usage (%)",
            "layout": {
              "column": 1,
              "row": 1,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "config": {
                "bisect": {
                  "position": null
                }
              },
              "legend": {
                "enabled": false
              },
              "nrqlQueries": [
                {
                  "accountId": "3510613",
                  "events": {
                    "agent_ids": [
                      "8263907339200612017"
                    ]
                  },
                  "query": "SELECT average(cpuPercent) AS 'CPU used %' FROM SystemSample WHERE `entityGuid` = 'MzUxMDYxM3xJTkZSQXxOQXw4MjYzOTA3MzM5MjAwNjEyMDE3' TIMESERIES auto"
                }
              ],
              "yAxisLeft": {
                "max": 100,
                "min": 0,
                "zero": null
              }
            }
          },
          {
            "title": "Memory usage (%)",
            "layout": {
              "column": 5,
              "row": 1,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "config": {
                "bisect": {
                  "position": null
                }
              },
              "legend": {
                "enabled": false
              },
              "nrqlQueries": [
                {
                  "accountId": "3510613",
                  "events": {
                    "agent_ids": [
                      "8263907339200612017"
                    ]
                  },
                  "query": "SELECT average(memoryUsedPercent) AS 'Memory used %' FROM SystemSample WHERE `entityGuid` = 'MzUxMDYxM3xJTkZSQXxOQXw4MjYzOTA3MzM5MjAwNjEyMDE3' TIMESERIES auto"
                }
              ],
              "yAxisLeft": {
                "max": 100,
                "min": 0,
                "zero": null
              }
            }
          },
          {
            "title": "Storage usage (%)",
            "layout": {
              "column": 9,
              "row": 1,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "config": {
                "bisect": {
                  "position": null
                }
              },
              "legend": {
                "enabled": false
              },
              "nrqlQueries": [
                {
                  "accountId": "3510613",
                  "events": {
                    "agent_ids": [
                      "8263907339200612017"
                    ]
                  },
                  "query": "SELECT average(diskUsedPercent) as 'Storage used %' FROM StorageSample WHERE `entityGuid` = 'MzUxMDYxM3xJTkZSQXxOQXw4MjYzOTA3MzM5MjAwNjEyMDE3' TIMESERIES auto"
                }
              ],
              "yAxisLeft": {
                "max": 100,
                "min": 0,
                "zero": null
              }
            }
          },
          {
            "title": "Network traffic",
            "layout": {
              "column": 1,
              "row": 4,
              "width": 8,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.area"
            },
            "rawConfiguration": {
              "actions": {
                "point": {
                  "logs": {
                    "enabled": true,
                    "entityGuid": "MzUxMDYxM3xJTkZSQXxOQXw4MjYzOTA3MzM5MjAwNjEyMDE3"
                  }
                }
              },
              "config": {
                "bisect": {
                  "position": null
                }
              },
              "nrqlQueries": [
                {
                  "accountId": "3510613",
                  "events": {
                    "agent_ids": [
                      "8263907339200612017"
                    ]
                  },
                  "query": "SELECT average(transmitBytesPerSecond) AS 'Transmit bytes per second', average(receiveBytesPerSecond) AS 'Receive bytes per second' FROM NetworkSample WHERE `entityGuid` = 'MzUxMDYxM3xJTkZSQXxOQXw4MjYzOTA3MzM5MjAwNjEyMDE3' TIMESERIES auto"
                }
              ]
            }
          },
          {
            "title": "Disk usage",
            "layout": {
              "column": 9,
              "row": 4,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.table"
            },
            "rawConfiguration": {
              "config": {
                "bisect": {
                  "position": null
                }
              },
              "nrqlQueries": [
                {
                  "accountId": "3510613",
                  "events": {
                    "agent_ids": [
                      "8263907339200612017"
                    ]
                  },
                  "query": "SELECT latest(diskUsedPercent) as 'Used %' FROM StorageSample FACET device WHERE entityId = '8263907339200612017' LIMIT 4"
                }
              ]
            }
          },
          {
            "title": "Load average",
            "layout": {
              "column": 1,
              "row": 7,
              "width": 6,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "config": {
                "bisect": {
                  "position": null
                }
              },
              "nrqlQueries": [
                {
                  "accountId": "3510613",
                  "events": {
                    "agent_ids": [
                      "8263907339200612017"
                    ]
                  },
                  "query": "SELECT average(loadAverageOneMinute) as '1 minute', average(loadAverageFiveMinute) AS '5 minutes', average(loadAverageFifteenMinute) AS '15 minutes' FROM SystemSample WHERE `entityGuid` = 'MzUxMDYxM3xJTkZSQXxOQXw4MjYzOTA3MzM5MjAwNjEyMDE3' TIMESERIES auto"
                }
              ]
            }
          },
          {
            "title": "Processes running",
            "layout": {
              "column": 7,
              "row": 7,
              "width": 6,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.table"
            },
            "rawConfiguration": {
              "config": {
                "bisect": {
                  "position": null
                }
              },
              "nrqlQueries": [
                {
                  "accountId": "3510613",
                  "events": {
                    "agent_ids": [
                      "8263907339200612017"
                    ]
                  },
                  "query": "SELECT latest(cpuPercent) as 'CPU %', latest(threadCount) as 'Threads' FROM ProcessSample FACET processId, processDisplayName WHERE entityId = '8263907339200612017' ORDER BY cpuPercent asc LIMIT 100"
                }
              ]
            }
          }
        ]
      }
    ]
  }